using Microsoft.Extensions.Configuration;
using System;
using System.IO;
using XCommon.Application;
using XCommon.Application.Login;
using XCommon.Patterns.Ioc;
using XCommon.Web;

namespace [{name}].Business.Test.DataScenery
{
	public static class Constants
    {
		private static bool KernelInited { get; set; }

		public static void InitKernel()
		{
			if (KernelInited)
				return;

			var builder = new ConfigurationBuilder()
				   .SetBasePath(Directory.GetCurrentDirectory())
				   .AddJsonFile("appsettings.json", optional: true, reloadOnChange: true);

			IConfigurationRoot configuration = builder.Build();
			ApplicationSettings appSettings = configuration.Get<ApplicationSettings>("[{name}]");

			Kernel.Map<IApplicationSettings>().To(appSettings);

			Factory.Register.Do(true);

			KernelInited = true;
		}
	}
}
